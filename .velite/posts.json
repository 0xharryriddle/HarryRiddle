[
  {
    "slug": "posts/harry-riddle-how-to-integrate-a-light-client-in-decentralized-application-on-polkadot-network",
    "title": "How to integrate a Light Client in Decentralized Application on Polkadot Network",
    "date": "2024-10-29T17:00:00.000Z",
    "published": true,
    "body": "const{Fragment:e,jsx:t,jsxs:n}=arguments[0];function _createMdxContent(i){const o={a:\"a\",blockquote:\"blockquote\",del:\"del\",em:\"em\",h1:\"h1\",h3:\"h3\",h4:\"h4\",hr:\"hr\",img:\"img\",li:\"li\",p:\"p\",strong:\"strong\",ul:\"ul\",...i.components};return n(e,{children:[t(o.h1,{id:\"how-to-integrate-a-light-client-in-decentralized-application-on-polkadot-network\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#how-to-integrate-a-light-client-in-decentralized-application-on-polkadot-network\",children:\"How to integrate a Light Client in Decentralized Application on Polkadot Network\"})}),\"\\n\",t(o.h3,{id:\"introduction\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction\",children:\"Introduction\"})}),\"\\n\",t(o.p,{children:\"Blockchain interactions require communication with a Peer-to-Peer (P2P) network to validate transactions and generate new blocks. Polkadot, like other blockchains, relies on a network of nodes that powers its consensus mechanism.\"}),\"\\n\",n(o.p,{children:[t(o.a,{href:\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2f3cf6e7-8ec7-4622-8338-6f8d1d1ef6a8_365x250.png\",children:t(o.img,{src:\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2f3cf6e7-8ec7-4622-8338-6f8d1d1ef6a8_365x250.png\",alt:\"How to set up and run a full node on Polkadot?\"})}),\"Source: \",t(o.strong,{children:t(o.a,{href:\"https://www.leewayhertz.com/how-to-set-up-a-full-node-on-polkadot/\",children:\"How to set up and run a full node on Polkadot?\"})})]}),\"\\n\",t(o.p,{children:\"To communicate between the decentralized application and a network node in Polkadot is through a JSON RPC protocol. Typically, there are 2 main ways to do this:\"}),\"\\n\",n(o.ul,{children:[\"\\n\",n(o.li,{children:[\"\\n\",n(o.p,{children:[t(o.strong,{children:\"User-Controlled Nodes:\"}),\" The \",t(o.strong,{children:\"Dapp (decentralized application)\"}),\" connects to a node client which the users have installed and run on their machine. These nodes are extremely secure because the users fully control it, but to install and maintain them are quietly complicated as they must be active 24/7 and connect with network rapidly.\"]}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",n(o.p,{children:[t(o.strong,{children:\"Publicly-Accessible Nodes:\"}),\" There are several third-parties or platforms providing a publicly-accessible node client. These nodes are available every time when users need so they are more convenient to interact. However, their drawbacks are insecure and centralized because they are controlled by their owner.\"]}),\"\\n\"]}),\"\\n\"]}),\"\\n\",t(o.p,{children:\"Substrate Connect, on the other hand, is introduced for decentralized application to minimally connect to Polkadot network instead of utilizing a centralized RPC node but still securely.\"}),\"\\n\",t(o.h3,{id:\"enter-substrate-connect-a-minimalistic-decentralized-solution\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#enter-substrate-connect-a-minimalistic-decentralized-solution\",children:\"Enter Substrate Connect: A Minimalistic, Decentralized Solution\"})}),\"\\n\",n(o.p,{children:[t(o.strong,{children:t(o.a,{href:\"https://substrate.io/substrate-connect/\",children:\"Substrate Connect\"})}),\" offers a secure and decentralized alternative to centralized RPC nodes. As a JavaScript library and browser extension, it enables developers to build \",t(o.strong,{children:\"light clients\"}),\" for Substrate chains directly in a Dapp, using \",t(o.strong,{children:t(o.a,{href:\"https://polkadot.js.org/docs/api/\",children:\"PolkadotJS API\"})}),\" (a collection of JavaScript tools, utilities and libraries for interacting with the Polkadot network).\"]}),\"\\n\",n(o.p,{children:[\"With Substrate Connect, there’s no need for a centralized RPC node; it operates like a bridge, running **\",t(o.a,{href:\"https://github.com/smol-dot/smoldot\",children:\"Smoldot\"}),\" **in the browser extension. This replaces the now-deprecated \",t(o.strong,{children:t(o.a,{href:\"https://github.com/paritytech/substrate\",children:t(o.del,{children:\"Substrate\"})})}),\" and offers a robust alternative for \",t(o.strong,{children:t(o.a,{href:\"https://github.com/paritytech/substrate\",children:\"Substrate\"})}),\" -based chains.\"]}),\"\\n\",t(o.h3,{id:\"why-use-substrate-connect\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#why-use-substrate-connect\",children:\"Why Use Substrate Connect?\"})}),\"\\n\",n(o.p,{children:[t(o.strong,{children:\"Polkadot\"}),\" is designed with decentralization at its core, following the \",t(o.strong,{children:\"Blockchain Trilemma\"}),\" ( \",t(o.strong,{children:\"Decentralization\"}),\" , \",t(o.strong,{children:\"Security\"}),\" , and \",t(o.strong,{children:\"Scalability\"}),\" ). However, most user interfaces connect to the network through centralized nodes, making decentralization challenging. \",t(o.strong,{children:t(o.a,{href:\"https://substrate.io/substrate-connect/\",children:\"Substrate Connect\"})}),\" provides a lightweight, decentralized option for DApps to interact securely with Polkadot, lowering complexity for end-users.\"]}),\"\\n\",t(o.h3,{id:\"integrating-the-light-client\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#integrating-the-light-client\",children:\"Integrating the Light Client!\"})}),\"\\n\",n(o.p,{children:[\"This guide walks you through integrating a Light Client with **\",t(o.a,{href:\"https://github.com/smol-dot/smoldot\",children:\"Smoldot\"}),\" , \",t(o.a,{href:\"https://substrate.io/substrate-connect/\",children:\"Substrate Connect\"}),\" **and \",t(o.strong,{children:t(o.a,{href:\"https://docs.dedot.dev/\",children:\"Dedot\"})}),\" (an alternative to \",t(o.strong,{children:t(o.a,{href:\"https://polkadot.js.org/docs/api/\",children:\"PolkadotJS API\"})}),\" ) in a Voting Escrow application.\"]}),\"\\n\",n(o.p,{children:[\"Our repository is using \",t(o.strong,{children:\"Next.Js\"}),\" framework to build the \",t(o.strong,{children:\"User-Interface\"}),\" \",t(o.strong,{children:\"Application\"}),\" for Decentralized Application:\"]}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client\",children:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client\"})}),\"\\n\",t(o.hr,{}),\"\\n\",n(o.blockquote,{children:[\"\\n\",t(o.h4,{id:\"prepare-the-chain-specification-json\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#prepare-the-chain-specification-json\",children:t(o.strong,{children:\"Prepare the Chain Specification JSON\"})})}),\"\\n\"]}),\"\\n\",t(o.p,{children:\"Firstly, we must prepare the chain specification json file for the Relaychain or Parachain. We can find the chain specification of our expected network in Substrate Connect repository.\"}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://github.com/paritytech/substrate-connect/tree/main/packages/connect-known-chains/specs\",children:\"https://github.com/paritytech/substrate-connect/tree/main/packages/connect-known-chains/specs\"})}),\"\\n\",n(o.blockquote,{children:[\"\\n\",t(o.h4,{id:\"install-dependencies\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#install-dependencies\",children:\"Install Dependencies\"})}),\"\\n\"]}),\"\\n\",n(o.p,{children:[\"Install necessary packages such as \",t(o.strong,{children:\"smoldot\"}),\" , \",t(o.strong,{children:\"@dedot/chaintypes\"}),\" and a compatible version of \",t(o.strong,{children:\"Dedot\"}),\" :\"]}),\"\\n\",t(o.p,{children:\"npm install smoldot dedot@0.5.0 @dedot/chaintypes\"}),\"\\n\",n(o.blockquote,{children:[\"\\n\",t(o.h4,{id:\"implement-substrate-connect-provider-and-client\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#implement-substrate-connect-provider-and-client\",children:t(o.strong,{children:\"Implement Substrate Connect Provider and Client\"})})}),\"\\n\"]}),\"\\n\",n(o.p,{children:[\"Set up the \",t(o.strong,{children:\"Substrate Connect Provider\"}),\" and \",t(o.strong,{children:\"Client\"}),\" in a custom hook for use in your \",t(o.strong,{children:\"Next.js\"}),\" or \",t(o.strong,{children:\"React\"}),\" project:\"]}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client/blob/main/src/hooks/useApi.ts\",children:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client/blob/main/src/hooks/useApi.ts\"})}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fad2d53e7-f2c3-4ae1-9c41-c96d987e8bba_1514x2390.png\",children:t(o.img,{src:\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fad2d53e7-f2c3-4ae1-9c41-c96d987e8bba_1514x2390.png\",alt:\"\"})})}),\"\\n\",n(o.blockquote,{children:[\"\\n\",t(o.h4,{id:\"configure-api-context-for-project-layout\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#configure-api-context-for-project-layout\",children:\"Configure API Context for Project Layout\"})}),\"\\n\"]}),\"\\n\",t(o.p,{children:\"Integrate the Light Client provider across your application with an API Context setup:\"}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client/blob/main/src/providers/ApiProvider.tsx\",children:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client/blob/main/src/providers/ApiProvider.tsx\"})}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2f375d61-ff45-4a1d-9d80-b35dbf605ef2_1514x2876.png\",children:t(o.img,{src:\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2f375d61-ff45-4a1d-9d80-b35dbf605ef2_1514x2876.png\",alt:\"\"})})}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client/tree/main/src/app\",children:\"https://github.com/thai-cong-nguyen/Voting-Escrow-Light-Client/tree/main/src/app\"})}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F42e11e8b-4212-4d0f-80b5-7d9b7baf210e_1514x1460.png\",children:t(o.img,{src:\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F42e11e8b-4212-4d0f-80b5-7d9b7baf210e_1514x1460.png\",alt:\"\"})})}),\"\\n\",n(o.blockquote,{children:[\"\\n\",t(o.h4,{id:\"test-the-light-client-connection\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#test-the-light-client-connection\",children:\"Test the Light Client Connection\"})}),\"\\n\"]}),\"\\n\",t(o.p,{children:\"Run our application with:\"}),\"\\n\",t(o.p,{children:\"npm run dev\"}),\"\\n\",t(o.p,{children:\"If successful, you’ll see confirmation in the browser console 🎉. This confirms your Light Client is now operational within your Dapp!\"}),\"\\n\",t(o.p,{children:t(o.a,{href:\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a3718a3-c5bb-44ce-9419-5d101b2497d7_1910x314.png\",children:t(o.img,{src:\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a3718a3-c5bb-44ce-9419-5d101b2497d7_1910x314.png\",alt:\"\"})})}),\"\\n\",n(o.p,{children:[\"In this context, we used the \",t(o.strong,{children:\"Edge Browser\"}),\" to access to our application.\"]}),\"\\n\",n(o.blockquote,{children:[\"\\n\",t(o.h4,{id:\"interact-with-smart-contracts\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#interact-with-smart-contracts\",children:\"Interact with Smart Contracts\"})}),\"\\n\"]}),\"\\n\",n(o.p,{children:[\"Using the “api” client from the API Context, interact with the Relaychain or Parachain via \",t(o.strong,{children:t(o.a,{href:\"https://docs.dedot.dev/\",children:\"Dedot SDK\"})}),\" or \",t(o.strong,{children:t(o.a,{href:\"https://polkadot.js.org/docs/api/\",children:\"PolkadotJS API\"})}),\" to call smart contracts.\"]}),\"\\n\",t(o.h3,{id:\"challenges-\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#challenges-\",children:\"Challenges 💪🏻\"})}),\"\\n\",n(o.ul,{children:[\"\\n\",n(o.li,{children:[\"The \",t(o.strong,{children:\"Smoldot SDK\"}),\" supports \",t(o.strong,{children:\"WASM-compatible\"}),\" browsers, so ensure your Dapp runs on a browser optimized for WASM.\"]}),\"\\n\"]}),\"\\n\",t(o.h3,{id:\"references\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#references\",children:\"References\"})}),\"\\n\",n(o.ul,{children:[\"\\n\",n(o.li,{children:[\"\\n\",t(o.p,{children:t(o.strong,{children:t(o.a,{href:\"https://github.com/CocDap/staking-ui\",children:\"Example Staking UI Repository - Author: CocDap\"})})}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",t(o.p,{children:t(o.strong,{children:t(o.a,{href:\"https://forum.polkadot.network/t/introducing-dedot-a-delightful-javascript-client-for-polkadot-substrate-based-blockchains/8956\",children:\"Introducing Dedot: A delightful JavaScript client for Polkadot& Substrate-based blockchains\"})})}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",t(o.p,{children:t(o.strong,{children:t(o.a,{href:\"https://forum.polkadot.network/t/polkadot-provider-api-a-common-interface-for-building-decentralized-applications/4128\",children:\"Polkadot Provider API: a common interface for building decentralized applications\"})})}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",t(o.p,{children:t(o.strong,{children:t(o.a,{href:\"https://forum.polkadot.network/t/smoldot-updates-threads/4471\",children:\"Smoldot updates threads\"})})}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",t(o.p,{children:t(o.strong,{children:t(o.a,{href:\"https://github.com/smol-dot/smoldot\",children:\"smol-dot/smoldot - Lightweight client for Substrate-based chains\"})})}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",t(o.p,{children:t(o.strong,{children:t(o.a,{href:\"https://www.parity.io/blog/introducing-substrate-connect\",children:\"Introducing Substrate Connect: Browser-Based Light Clients for Connecting to Substrate Chains | Parity Technologies\"})})}),\"\\n\"]}),\"\\n\"]}),\"\\n\",t(o.h3,{id:\"about-the-author-\",children:t(o.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#about-the-author-\",children:\"About the Author 👋🏻\"})}),\"\\n\",n(o.p,{children:[t(o.strong,{children:\"Bio\"}),\" : \",n(o.em,{children:[\"Harry Riddle, an undergraduate Web3 Developer focused on Blockchain and AI, is a member of the \",t(o.strong,{children:\"OpenGuild\"}),\" community in Vietnam.\"]})]}),\"\\n\",n(o.p,{children:[t(o.strong,{children:\"Contact info\"}),\" :\"]}),\"\\n\",n(o.ul,{children:[\"\\n\",n(o.li,{children:[\"\\n\",n(o.p,{children:[t(o.strong,{children:\"X/Twitter\"}),\" : \",t(o.a,{href:\"https://x.com/0xHarryNguyenVN\",children:\"0xHarryNguyenVN\"})]}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",n(o.p,{children:[t(o.strong,{children:\"Telegram\"}),\" : \",t(o.a,{href:\"https://t.me/HarryRiddle\",children:\"@HarryRiddle\"})]}),\"\\n\"]}),\"\\n\",n(o.li,{children:[\"\\n\",n(o.p,{children:[t(o.strong,{children:\"Discord\"}),\" : \",t(o.a,{href:\"http://@harrynguyen2107\",children:\"@harrynguyen2107\"})]}),\"\\n\"]}),\"\\n\"]})]})}return{default:function(e={}){const{wrapper:n}=e.components||{};return n?t(n,{...e,children:t(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "slugAsParams": "harry-riddle-how-to-integrate-a-light-client-in-decentralized-application-on-polkadot-network"
  },
  {
    "slug": "posts/hello-world",
    "title": "Hello World",
    "description": "This is our first blog",
    "date": "2024-10-20T00:00:00.000Z",
    "published": true,
    "body": "const{Fragment:n,jsx:t,jsxs:o}=arguments[0];function _createMdxContent(e){const i={a:\"a\",h2:\"h2\",p:\"p\",...e.components},{Callout:r}=i;return r||function(n,t){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}(\"Callout\",!0),o(n,{children:[t(r,{type:\"danger\",children:t(i.p,{children:\"Welcome to my blog\"})}),\"\\n\",t(i.h2,{id:\"introduction\",children:t(i.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction\",children:\"Introduction\"})}),\"\\n\",t(i.h2,{id:\"introduction-1\",children:t(i.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction-1\",children:\"Introduction\"})}),\"\\n\",t(i.h2,{id:\"introduction-2\",children:t(i.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction-2\",children:\"Introduction\"})}),\"\\n\",t(i.h2,{id:\"introduction-3\",children:t(i.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction-3\",children:\"Introduction\"})})]})}return{default:function(n={}){const{wrapper:o}=n.components||{};return o?t(o,{...n,children:t(_createMdxContent,{...n})}):_createMdxContent(n)}};",
    "slugAsParams": "hello-world"
  },
  {
    "slug": "posts/light-client-polkadot/light-client-polkadot",
    "title": "Light Client in Polkadot Network",
    "description": "Light Client - Substrate Connect provides a secure, minimalistic approach for Decentralized Applications on Polkadot, bypassing the need for full node installations.",
    "date": "2024-11-28T17:00:00.000Z",
    "published": true,
    "body": "const{Fragment:e,jsx:n,jsxs:l}=arguments[0];function _createMdxContent(s){const r={a:\"a\",annotation:\"annotation\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",math:\"math\",mi:\"mi\",mo:\"mo\",mrow:\"mrow\",msub:\"msub\",p:\"p\",pre:\"pre\",semantics:\"semantics\",span:\"span\",strong:\"strong\",ul:\"ul\",...s.components};return l(e,{children:[n(r.h2,{id:\"substrate-connect\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#substrate-connect\",children:\"Substrate Connect\"})}),\"\\n\",n(r.h3,{id:\"introduction\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction\",children:\"Introduction\"})}),\"\\n\",n(r.p,{children:\"Blockchain interactions require communication with a Peer-to-Peer (P2P) network to validate transactions and generate new blocks. Polkadot, like other blockchains, relies on a network of nodes that powers its consensus mechanism.\"}),\"\\n\",n(r.p,{children:n(r.img,{src:\"https://d3lkc3n5th01x7.cloudfront.net/wp-content/uploads/2022/08/09222628/Polkadot-node-setup.png\",alt:\"align=center&caption=Peer-to-Peer Network&sourceTitle= Polkadot's Architecture&sourceURL=https://softtech-blog.weebly.com/outline-of-polkadot-architecture\"})}),\"\\n\",n(r.p,{children:\"To communicate between the decentralized application and a network node in Polkadot is through a JSON RPC protocol. Typically, there are 2 main ways to do this:\"}),\"\\n\",l(r.ul,{children:[\"\\n\",l(r.li,{children:[n(r.strong,{children:\"User-Controlled Nodes:\"}),\" The Dapp (decentralized application) connects to a node client which the users have installed and run on their machine. These nodes are extremely secure because the users fully control it, but to install and maintain them are quietly complicated as they must be active 24/7 and connect with network rapidly.\"]}),\"\\n\",l(r.li,{children:[n(r.strong,{children:\"Publicly-Accessible Nodes:\"}),\" There are several third-parties or platforms providing a publicly-accessible node client. These nodes are available every time when users need so they are more convenient to interact. However, their drawbacks are insecure and centralized because they are controlled by their owner.\"]}),\"\\n\"]}),\"\\n\",l(r.p,{children:[n(r.strong,{children:n(r.a,{href:\"https://substrate.io/substrate-connect/\",children:\"Substrate Connect\"})}),\", on the other hand, is introduced for decentralized application to minimally connect to Polkadot network instead of utilizing a centralized RPC node but still securely.\"]}),\"\\n\",n(r.h3,{id:\"substate-connect--the-perfect-alternative-for-substrate-smoldot\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#substate-connect--the-perfect-alternative-for-substrate-smoldot\",children:\"Substate Connect & The perfect alternative for Substrate: Smoldot\"})}),\"\\n\",l(r.p,{children:[\"Firstly, \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/substrate\",children:\"Substrate\"})}),\" was ever one of the core repositories in the \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/polkadot-sdk\",children:\"Polkadot SDK\"})}),\" to help everyone to build the unique Blockchain on the Polkadot. However, it was merged with two repositories Cumulus and Polkadot into a new repository: \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/polkadot-sdk\",children:\"the Polkadot SDK\"})}),\". From here, \",n(r.strong,{children:n(r.a,{href:\"https://github.com/smol-dot/smoldot\",children:\"Smoldot\"})}),\" is introduced as an alternative client of \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/substrate\",children:\"Substrate\"})}),\"-based chain.\"]}),\"\\n\",l(r.p,{children:[n(r.strong,{children:\"Smoldot\"}),\" validates the submitted transactions (from users) before sending to full nodes (centralized nodes) by itself to add those transactions to the transaction pool. \",n(r.strong,{children:\"Substrate Connect\"}),\" provides the infrastructure necessary to run \",n(r.strong,{children:\"light clients\"}),\" directly in the browsers. By default, \",n(r.strong,{children:\"Substrate Connect\"}),\" runs in the browser independently with each browser tab, install the browser extension to enable resource sharing among browser tabs. With \",n(r.strong,{children:\"Substrate Connect\"}),\", there’s no need for a centralized RPC node; it operates like a bridge, running \",n(r.strong,{children:n(r.a,{href:\"https://github.com/smol-dot/smoldot\",children:\"Smoldot\"})}),\" in the browser extension making it possible for every tabs or website to sync with the chain.\"]}),\"\\n\",l(r.p,{children:[\"Abstractly, \",n(r.strong,{children:\"Smoldot\"}),\" is used to interact with the \",n(r.strong,{children:\"relay chain\"}),\" or a \",n(r.strong,{children:\"parachain\"}),\", it always needs to sync with the relay chain. What about for a parachain? The parachain's finalized state is guaranteed on the relay chain. To verify whether a relay chain block is finalized, the light client needs to know the \",n(r.strong,{children:\"elected validators\"}),\" from the \",n(r.strong,{children:\"GRANDPA\"}),\" protocol. \",l(r.strong,{children:[n(r.a,{href:\"https://github.com/w3f/consensus/blob/master/pdf/grandpa.pdf\",children:\"GRANDPA\"}),\" (GHOST-based Recursive ANcestor Deriving Prefix Agreement)\"]}),\" is the finality gadget that is implemented for the relay chain. The \",n(r.strong,{children:\"Polkadot Host\"}),\" uses the \",n(r.strong,{children:\"GRANDPA\"}),\" finality protocol to finality blocks. The condition for Smoldot to set the block finalized is that more than \",n(r.strong,{children:\"2/3\"}),\" of the validators nodes voted \",n(r.strong,{children:\"FOR\"}),\" on the block and the signatures are correct. Polkadot uses \",n(r.strong,{children:\"NPoS (Nominated Proof-of-Stake)\"}),\" as its mechanism for selecting the validator set. Changes authority set or validator set are crucial to track for a node who tries to sync with the relay chain in order to verify justifications. The speed up way to sync which its proposed is \",n(r.strong,{children:n(r.a,{href:\"https://spec.polkadot.network/chap-networking#sect-msg-warp-sync\",children:\"warp sync\"})}),\". Instead of downloading the entire chain as the \",n(r.strong,{children:n(r.a,{href:\"https://spec.polkadot.network/chap-sync#id-full-sync\",children:\"full sync protocol\"})}),\" or downloading the block header history and validating the authority set changes like \",n(r.strong,{children:n(r.a,{href:\"https://spec.polkadot.network/chap-sync#sect-sync-fast\",children:\"fast sync\"})}),\" , it only downloads the block headers where authority set changes occurred and this things are called \",n(r.strong,{children:\"fragments\"}),\". These fragments form the arrays and concat with the boolean value indicating whether the warp sync has been completed as the below format:\"]}),\"\\n\",l(\"div\",{className:\"flex flex-col items-center space-y-2\",children:[n(\"span\",{className:\"text-4xl\",children:l(r.span,{className:\"katex\",children:[n(r.span,{className:\"katex-mathml\",children:n(r.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:l(r.semantics,{children:[l(r.mrow,{children:[n(r.mi,{children:\"P\"}),n(r.mo,{children:\"=\"}),n(r.mo,{stretchy:\"false\",children:\"(\"}),l(r.msub,{children:[n(r.mi,{children:\"f\"}),n(r.mi,{children:\"x\"})]}),n(r.mi,{mathvariant:\"normal\",children:\".\"}),n(r.mi,{mathvariant:\"normal\",children:\".\"}),n(r.mi,{mathvariant:\"normal\",children:\".\"}),l(r.msub,{children:[n(r.mi,{children:\"f\"}),n(r.mi,{children:\"y\"})]}),n(r.mo,{separator:\"true\",children:\",\"}),n(r.mi,{children:\"c\"}),n(r.mo,{stretchy:\"false\",children:\")\"})]}),n(r.annotation,{encoding:\"application/x-tex\",children:\" P = (f_{x}...f_{y},c)\"})]})})}),l(r.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[l(r.span,{className:\"base\",children:[n(r.span,{className:\"strut\",style:{height:\"0.6833em\"}}),n(r.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),n(r.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),n(r.span,{className:\"mrel\",children:\"=\"}),n(r.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),l(r.span,{className:\"base\",children:[n(r.span,{className:\"strut\",style:{height:\"1.0361em\",verticalAlign:\"-0.2861em\"}}),n(r.span,{className:\"mopen\",children:\"(\"}),l(r.span,{className:\"mord\",children:[n(r.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10764em\"},children:\"f\"}),n(r.span,{className:\"msupsub\",children:l(r.span,{className:\"vlist-t vlist-t2\",children:[l(r.span,{className:\"vlist-r\",children:[n(r.span,{className:\"vlist\",style:{height:\"0.1514em\"},children:l(r.span,{style:{top:\"-2.55em\",marginLeft:\"-0.1076em\",marginRight:\"0.05em\"},children:[n(r.span,{className:\"pstrut\",style:{height:\"2.7em\"}}),n(r.span,{className:\"sizing reset-size6 size3 mtight\",children:n(r.span,{className:\"mord mtight\",children:n(r.span,{className:\"mord mathnormal mtight\",children:\"x\"})})})]})}),n(r.span,{className:\"vlist-s\",children:\"​\"})]}),n(r.span,{className:\"vlist-r\",children:n(r.span,{className:\"vlist\",style:{height:\"0.15em\"},children:n(r.span,{})})})]})})]}),n(r.span,{className:\"mord\",children:\"...\"}),l(r.span,{className:\"mord\",children:[n(r.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10764em\"},children:\"f\"}),n(r.span,{className:\"msupsub\",children:l(r.span,{className:\"vlist-t vlist-t2\",children:[l(r.span,{className:\"vlist-r\",children:[n(r.span,{className:\"vlist\",style:{height:\"0.1514em\"},children:l(r.span,{style:{top:\"-2.55em\",marginLeft:\"-0.1076em\",marginRight:\"0.05em\"},children:[n(r.span,{className:\"pstrut\",style:{height:\"2.7em\"}}),n(r.span,{className:\"sizing reset-size6 size3 mtight\",children:n(r.span,{className:\"mord mtight\",children:n(r.span,{className:\"mord mathnormal mtight\",style:{marginRight:\"0.03588em\"},children:\"y\"})})})]})}),n(r.span,{className:\"vlist-s\",children:\"​\"})]}),n(r.span,{className:\"vlist-r\",children:n(r.span,{className:\"vlist\",style:{height:\"0.2861em\"},children:n(r.span,{})})})]})})]}),n(r.span,{className:\"mpunct\",children:\",\"}),n(r.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),n(r.span,{className:\"mord mathnormal\",children:\"c\"}),n(r.span,{className:\"mclose\",children:\")\"})]})]})]})}),l(\"div\",{className:\"w-auto flex flex-col justify-center\",children:[l(\"span\",{children:[n(r.strong,{children:l(r.span,{className:\"katex\",children:[n(r.span,{className:\"katex-mathml\",children:n(r.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:l(r.semantics,{children:[l(r.mrow,{children:[l(r.msub,{children:[n(r.mi,{children:\"f\"}),n(r.mi,{children:\"x\"})]}),n(r.mi,{mathvariant:\"normal\",children:\".\"}),n(r.mi,{mathvariant:\"normal\",children:\".\"}),n(r.mi,{mathvariant:\"normal\",children:\".\"}),l(r.msub,{children:[n(r.mi,{children:\"f\"}),n(r.mi,{children:\"y\"})]})]}),n(r.annotation,{encoding:\"application/x-tex\",children:\"f_{x}...f_{y}\"})]})})}),n(r.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:l(r.span,{className:\"base\",children:[n(r.span,{className:\"strut\",style:{height:\"0.9805em\",verticalAlign:\"-0.2861em\"}}),l(r.span,{className:\"mord\",children:[n(r.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10764em\"},children:\"f\"}),n(r.span,{className:\"msupsub\",children:l(r.span,{className:\"vlist-t vlist-t2\",children:[l(r.span,{className:\"vlist-r\",children:[n(r.span,{className:\"vlist\",style:{height:\"0.1514em\"},children:l(r.span,{style:{top:\"-2.55em\",marginLeft:\"-0.1076em\",marginRight:\"0.05em\"},children:[n(r.span,{className:\"pstrut\",style:{height:\"2.7em\"}}),n(r.span,{className:\"sizing reset-size6 size3 mtight\",children:n(r.span,{className:\"mord mtight\",children:n(r.span,{className:\"mord mathnormal mtight\",children:\"x\"})})})]})}),n(r.span,{className:\"vlist-s\",children:\"​\"})]}),n(r.span,{className:\"vlist-r\",children:n(r.span,{className:\"vlist\",style:{height:\"0.15em\"},children:n(r.span,{})})})]})})]}),n(r.span,{className:\"mord\",children:\"...\"}),l(r.span,{className:\"mord\",children:[n(r.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10764em\"},children:\"f\"}),n(r.span,{className:\"msupsub\",children:l(r.span,{className:\"vlist-t vlist-t2\",children:[l(r.span,{className:\"vlist-r\",children:[n(r.span,{className:\"vlist\",style:{height:\"0.1514em\"},children:l(r.span,{style:{top:\"-2.55em\",marginLeft:\"-0.1076em\",marginRight:\"0.05em\"},children:[n(r.span,{className:\"pstrut\",style:{height:\"2.7em\"}}),n(r.span,{className:\"sizing reset-size6 size3 mtight\",children:n(r.span,{className:\"mord mtight\",children:n(r.span,{className:\"mord mathnormal mtight\",style:{marginRight:\"0.03588em\"},children:\"y\"})})})]})}),n(r.span,{className:\"vlist-s\",children:\"​\"})]}),n(r.span,{className:\"vlist-r\",children:n(r.span,{className:\"vlist\",style:{height:\"0.2861em\"},children:n(r.span,{})})})]})})]})]})})]})}),\":  is an array consisting of warp sync fragments.\"]}),l(\"span\",{children:[n(r.strong,{children:l(r.span,{className:\"katex\",children:[n(r.span,{className:\"katex-mathml\",children:n(r.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:l(r.semantics,{children:[n(r.mrow,{children:n(r.mi,{children:\"c\"})}),n(r.annotation,{encoding:\"application/x-tex\",children:\"c\"})]})})}),n(r.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:l(r.span,{className:\"base\",children:[n(r.span,{className:\"strut\",style:{height:\"0.4306em\"}}),n(r.span,{className:\"mord mathnormal\",children:\"c\"})]})})]})}),\":  is the boolean indicates whether the warp sync has been completed.\"]})]})]}),\"\\n\",l(r.p,{children:[\"When it is up to date with the latest \",n(r.strong,{children:\"GRANDPA\"}),\", Smoldot will start syncing with the chain similar to a full node. Smoldot only retrieve new block headers and verify by verifying the \",n(r.strong,{children:\"authenticity\"}),\" of those blocks. In addition, Polkadot also uses the \",n(r.strong,{children:\"BABE protocol\"}),\" to produce the new blocks. \",n(r.strong,{children:\"BABE (Blind Assignmnent for Blockchain Extension)\"}),\" is the block production mechanism that runs between the validator nodes and determines the author or the owner of new blocks. After Smoldot verifies th block header, whether the author of the block was selected by \",n(r.strong,{children:\"BABE\"}),\" protocol. Practically, BABE separate into many epochs, with each epochs being divided into \",n(r.strong,{children:\"slots\"}),\". All slots in each epoch are sequentially indexed starting from 0. At the beginning of each epoch, the BABE needs to run the \",n(r.strong,{children:n(r.a,{href:\"https://spec.polkadot.network/sect-block-production#algo-block-production-lottery\",children:\"Block Production Lottery\"})}),\" to find out which slots it should produce a block and gossip to the other block producers.\"]}),\"\\n\",l(r.p,{children:[\"Finally, Smoldot verifies the \",n(r.strong,{children:\"consensus\"}),\" and the finality by tracking consecutively the authority set. The authority set will be obtained through the runtime when it updates the chain  it acquires subsequent changes from the block headers.\"]}),\"\\n\",n(r.h3,{id:\"what-does-smoldot-need-to-run-\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#what-does-smoldot-need-to-run-\",children:\"What does Smoldot need to run ?\"})}),\"\\n\",l(r.p,{children:[\"In order to start syncing with a chain, the Smoldot requires the list of information called \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/src/chain_spec.rs#L18-L34\",children:\"chainspec\"})}),\". A chain specification is the description of everything related the chain being desired connected and required for the client to successfully interact with that chain. The chainspec only consists of \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/smoldot/blob/main/src/chain_spec/structs.rs#L33\",children:\"clientspec\"})}),\" that look like as the following structure:\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",children:l(r.code,{\"data-line-numbers\":\"\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#F97583\"},children:\"...\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"#[derive(\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Serialize\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Deserialize\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Clone\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Debug\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")]\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"#[serde(rename_all \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#9ECBFF\"},children:' \"camelCase\"'}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")]\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"#[serde(deny_unknown_fields)]\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(r.span,{style:{color:\"#F97583\"},children:\"struct\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" ClientSpec\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") name\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" String\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") id\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" String\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[serde(default)]\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") chain_type\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" ChainType\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[serde(default)]\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") code_substitutes\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" HashMap\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"u64\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"HexString\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", fnv\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"FnvBuildHasher\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") boot_nodes\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Vec\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"String\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") telemetry_endpoints\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Vec\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<(\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"String\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"u8\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")>>,\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") protocol_id\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"String\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[serde(default \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#9ECBFF\"},children:' \"Default::default\"'}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", skip_serializing_if \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#9ECBFF\"},children:' \"Option::is_none\"'}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")]\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") fork_id\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"String\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[serde(default \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#9ECBFF\"},children:' \"Default::default\"'}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", skip_serializing_if \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#9ECBFF\"},children:' \"Option::is_none\"'}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")]\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") block_number_bytes\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"u8\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") properties\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Box\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<serde_json\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"value\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"RawValue\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">>,\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") fork_blocks\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Vec\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<(\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"u64\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"HashHexString\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")>>,\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") bad_blocks\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"HashSet\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"HashHexString\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"FnvBuildHasher\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">>,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[serde(default, skip_serializing)]\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[allow(unused)]\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") consensus_engine\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" (),\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") genesis\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Genesis\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") light_sync_state\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"LightSyncState\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"    #[serde(flatten)]\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"super\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\") parachain\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Option\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"ChainSpecParachain\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\">,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#F97583\"},children:\"...\"})})]})})}),\"\\n\",l(r.p,{children:[\"From the chainspec, the \",n(r.strong,{children:n(r.a,{href:\"https://github.com/Daanvdplas/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/src/chain/chain_information.rs#L118-L129\",children:\"chain information\"})}),\" is built. As we can see in the code, the chain information is all the crucial information Smoldot requires to verify the consensus and finality. It will be constructed from either:\"]}),\"\\n\",l(r.ul,{children:[\"\\n\",n(r.li,{children:\"The genesis state\"}),\"\\n\",l(r.li,{children:[\"The \",n(r.strong,{children:n(r.a,{href:\"https://github.com/Daanvdplas/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/src/chain_spec/light_sync_state.rs#L65\",children:\"checkpoint\"})})]}),\"\\n\",n(r.li,{children:\"From the database\"}),\"\\n\"]}),\"\\n\",n(r.p,{children:\"As a result, the chain information provides the starting authority set for the warp sync process.\"}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",children:l(r.code,{\"data-line-numbers\":\"\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"#[derive(\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Debug\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Clone\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\")]\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"pub\"}),n(r.span,{style:{color:\"#F97583\"},children:\" struct\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" ChainInformation\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#6A737D\"},children:\"    /// Header of the highest known finalized block.\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" finalized_block_header\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" header\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Header\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#6A737D\"},children:\"    /// Extra items that depend on the consensus engine.\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" consensus\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" ChainInformationConsensus\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#6A737D\"},children:\"    /// Extra items that depend on the finality engine.\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"    pub\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" finality\"}),n(r.span,{style:{color:\"#F97583\"},children:\":\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" ChainInformationFinality\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),\"\\n\",n(r.p,{children:\"However, to sync with a chain it needs much more information like that. It requires the information from other peers and therefore needs to join the peer-to-peer network.\"}),\"\\n\",n(r.h3,{id:\"networking\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#networking\",children:\"Networking\"})}),\"\\n\",n(r.p,{children:n(r.img,{src:\"https://i.imgur.com/5LcReWd.png\",alt:\"size=medium&caption=Networking Service&alt=Networking Service&sourceTitle=Smoldot: Hello world!&sourceURL=https://hackmd.io/@s_iGZLIITG6WjSgnFX0pcg/rkmmcvBno\"})}),\"\\n\",l(r.p,{children:[\"First of all, in order to connect to other nodes Smoldot needs the \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/bin/light-base/src/network_service.rs#L18-L37\",children:\"networking service\"})}),\". It's responsible to try stay connected as much as possible to the nodes of the peer-to-peer network of the chain and maintain open substreams with them in order to send out requests and notifications. The network service will create on background task for each active connection. There are 3 background tasks, the network service needs to start:\"]}),\"\\n\",l(r.ul,{children:[\"\\n\",l(r.li,{children:[\"Process the network service (main task). \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/bin/light-base/src/network_service.rs#L282\",children:\"Source code\"})})]}),\"\\n\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",children:l(r.code,{\"data-line-numbers\":\"\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"(config\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"tasks_executor)(\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#9ECBFF\"},children:'  \"network-service\"'}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"into\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#B392F0\"},children:\"  Box\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"pin\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" shared \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" shared\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"clone\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" future \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" background_task\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(shared, event_senders);\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" (abortable, abort_handle) \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" future\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"abortable\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(future);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"      abort_handles\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"push\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(abort_handle);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"      abortable\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"map\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#F97583\"},children:\"|\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"_\"}),n(r.span,{style:{color:\"#F97583\"},children:\"|\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" ())\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\");\"})})]})})}),\"\\n\",l(r.ul,{children:[\"\\n\",l(r.li,{children:[\"Network discovery (done through a separate task). \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/bin/light-base/src/network_service.rs#L296\",children:\"Source code\"})})]}),\"\\n\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",children:l(r.code,{\"data-line-numbers\":\"\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"(config\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"tasks_executor)(\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#9ECBFF\"},children:'  \"network-discovery\"'}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"into\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#B392F0\"},children:\"  Box\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"pin\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" shared \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" shared\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"clone\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" future \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#F97583\"},children:\" async\"}),n(r.span,{style:{color:\"#F97583\"},children:\" move\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"          let\"}),n(r.span,{style:{color:\"#F97583\"},children:\" mut\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" next_discovery \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" Duration\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"from_secs\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"5\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"          loop\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#B392F0\"},children:\"              TPlat\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"sleep\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(next_discovery)\"}),n(r.span,{style:{color:\"#F97583\"},children:\".await\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"              next_discovery \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" cmp\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"min\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(next_discovery \"}),n(r.span,{style:{color:\"#F97583\"},children:\"*\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\" 2\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(r.span,{style:{color:\"#B392F0\"},children:\"Duration\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"from_secs\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"120\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"              let\"}),n(r.span,{style:{color:\"#F97583\"},children:\" mut\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" guarded \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" shared\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"guarded\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"lock\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"()\"}),n(r.span,{style:{color:\"#F97583\"},children:\".await\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"              for\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" chain_index \"}),n(r.span,{style:{color:\"#F97583\"},children:\"in\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),n(r.span,{style:{color:\"#F97583\"},children:\"..\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"shared\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"log_chain_names\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"len\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"                  let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" operation_id \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" guarded\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"                      .\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"network\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"                      .\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"start_kademlia_discovery_round\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"TPlat\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"now\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(), chain_index);\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"                  let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" _prev_value \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" guarded\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"                      .\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"kademlia_discovery_operations\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"                      .\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"insert\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(operation_id, chain_index);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#B392F0\"},children:\"                  debug_assert!\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(_prev_value\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"is_none\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"              }\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"              shared\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"wake_up_main_background_task\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"notify\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#79B8FF\"},children:\"1\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"          }\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"      };\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" (abortable, abort_handle) \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" future\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"abortable\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(future);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"      abort_handles\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"push\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(abort_handle);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"      abortable\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"map\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#F97583\"},children:\"|\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"_\"}),n(r.span,{style:{color:\"#F97583\"},children:\"|\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" ())\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\");\"})})]})})}),\"\\n\",l(r.ul,{children:[\"\\n\",l(r.li,{children:[\"Process existing connections. \",n(r.strong,{children:n(r.a,{href:\"https://github.com/paritytech/smoldot/blob/76994b52cd658a4ac1dc7a08f6bd4eba702e0e87/bin/light-base/src/network_service.rs#L332\",children:\"Source code\"})})]}),\"\\n\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",children:l(r.code,{\"data-line-numbers\":\"\",\"data-language\":\"rs\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"(config\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"tasks_executor)(\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#9ECBFF\"},children:'  \"connections\"'}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"into\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#B392F0\"},children:\"  Box\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"pin\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" future \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#F97583\"},children:\" async\"}),n(r.span,{style:{color:\"#F97583\"},children:\" move\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"          let\"}),n(r.span,{style:{color:\"#F97583\"},children:\" mut\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" connections \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" stream\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"FuturesUnordered\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"new\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"          loop\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#B392F0\"},children:\"              futures\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"select!\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"                  new_connec \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" new_tasks_rx\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"select_next_some\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"                      connections\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"push\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(new_connec);\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"                  },\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"                  () \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" connections\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"select_next_some\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" {},\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"              }\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"          }\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"      };\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F97583\"},children:\"      let\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" (abortable, abort_handle) \"}),n(r.span,{style:{color:\"#F97583\"},children:\"=\"}),n(r.span,{style:{color:\"#B392F0\"},children:\" future\"}),n(r.span,{style:{color:\"#F97583\"},children:\"::\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"abortable\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(future);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"      abort_handles\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"push\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(abort_handle);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#E1E4E8\"},children:\"      abortable\"}),n(r.span,{style:{color:\"#F97583\"},children:\".\"}),n(r.span,{style:{color:\"#B392F0\"},children:\"map\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(r.span,{style:{color:\"#F97583\"},children:\"|\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\"_\"}),n(r.span,{style:{color:\"#F97583\"},children:\"|\"}),n(r.span,{style:{color:\"#E1E4E8\"},children:\" ())\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#E1E4E8\"},children:\");\"})})]})})}),\"\\n\",n(r.h4,{id:\"processing-the-networking-service\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#processing-the-networking-service\",children:\"Processing the networking service\"})}),\"\\n\",n(r.p,{children:\"This task is the main task in execution task of Smoldot. It ensures the objective of the Networking Service as we mentioned that Smoldot is always connected to the peer-to-peer network.\"}),\"\\n\",n(r.h4,{id:\"network-discovery\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#network-discovery\",children:\"Network discovery\"})}),\"\\n\",n(r.h4,{id:\"processing-existing-connections\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#processing-existing-connections\",children:\"Processing existing connections\"})}),\"\\n\",n(r.h3,{id:\"why-use-substrate-connect-\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#why-use-substrate-connect-\",children:\"Why use Substrate Connect ?\"})}),\"\\n\",l(r.p,{children:[n(r.strong,{children:\"Polkadot\"}),\" is designed with decentralization at its core, following the \",n(r.strong,{children:\"Blockchain Trilemma\"}),\" \",n(r.strong,{children:\"(Decentralization\"}),\", \",n(r.strong,{children:\"Security\"}),\", and \",n(r.strong,{children:\"Scalability)\"}),\". However, most user interfaces connect to the network through centralized nodes, making decentralization challenging. \",n(r.strong,{children:n(r.a,{href:\"https://substrate.io/substrate-connect/\",children:\"Substrate Connect\"})}),\" provides a lightweight, decentralized option for DApps to interact securely with Polkadot, lowering complexity for end-users.\"]})]})}return{default:function(e={}){const{wrapper:l}=e.components||{};return l?n(l,{...e,children:n(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "slugAsParams": "light-client-polkadot/light-client-polkadot"
  }
]